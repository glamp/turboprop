# Step 000009: Construct-Level Semantic Search

## Overview
Implement semantic search over individual code constructs (functions, classes) to provide more granular and precise search results.

## Context
With code constructs now extracted and indexed (Step 000007), we can search at the function/class level rather than just file level, providing much more precise results for developers.

## Implementation Tasks

### 1. Construct Search Operations
- Create `construct_search.py` module
- Implement semantic search over the `code_constructs` table
- Add construct-specific ranking algorithms
- Support filtering by construct type (functions only, classes only, etc.)

### 2. Hybrid Search Implementation
- Combine file-level and construct-level results intelligently
- Implement result merging and deduplication
- Add construct context to file-level results when available
- Rank results based on both file and construct relevance

### 3. Specialized Search Tools
- Create MCP tools for construct-specific searches:
  - `search_functions` - find functions by description
  - `search_classes` - find classes and their methods
  - `search_imports` - find import patterns and dependencies
- Add construct filtering options to main search tools

### 4. Enhanced Result Context
- Include construct signatures and docstrings in results
- Show related constructs from the same file
- Add call graph information where available
- Provide construct usage examples and patterns

## Success Criteria
- [ ] Construct-level search returns more precise results than file-level search
- [ ] Hybrid search effectively combines file and construct results
- [ ] Specialized search tools work for functions, classes, and imports
- [ ] Results include rich construct metadata and context
- [ ] Search performance is acceptable with the additional construct data

## Files to Create/Modify
- `construct_search.py` - New module for construct-level search
- `search_operations.py` - Add hybrid search capabilities
- `mcp_server.py` - Add specialized construct search tools
- `tests/test_construct_search.py` - Test construct search accuracy

## Dependencies
- Step 000007 must be completed (code constructs extraction)
- Step 000008 must be completed (structured responses)

## Technical Notes
- Use separate vector searches on constructs and files, then merge results
- Weight construct matches higher than file matches for precision
- Consider caching construct embeddings for faster repeated searches
- Handle cases where constructs are more relevant than their containing files

## Estimated Effort
6-7 hours